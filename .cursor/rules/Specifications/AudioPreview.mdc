---
description: 'Interactive audio preview feature with 3D flip animation, real-time waveform visualization, and automatic fade in/out. Apply when implementing or modifying audio preview functionality.'
---

# Audio Preview Feature

## Overview

Interactive audio preview for audio files in the file list. Hover over audio file icons to flip and play the audio at 25% volume with fade effects and live waveform visualization.

## Visual Requirements

- **3D Flip Animation**: Smooth card flip effect using CSS 3D transforms on hover
- **Real-Time Waveform**: Multiple vertical bars showing actual audio frequency spectrum
- **Frequency Analysis**: Use Web Audio API to analyze and visualize live audio data
- **Hover State**: Clear visual indication during audio playback

## Audio Playback Behavior

- **Volume**: Low, non-intrusive volume level for preview
- **Fade In**: Gradual volume increase from silence to preview level
- **Fade Out**: Quick volume decrease when hover ends
- **Loop**: Audio repeats continuously while hovering
- **Auto-pause**: Playback stops when user moves cursor away
- **Failsafe**: Cleanup mechanisms ensure audio always stops properly

## Performance Requirements

- **Lazy Loading**: Audio resources created only when needed
- **Resource Cleanup**: Proper disposal of audio elements, contexts, and URLs
- **Efficient Animation**: Use optimized animation techniques (requestAnimationFrame)
- **Memory Management**: No memory leaks from event listeners or contexts
- **State Protection**: Prevent race conditions during rapid hover changes
- **Optimized Analysis**: Use efficient FFT settings for real-time frequency analysis

## Supported Formats

All standard audio formats supported by the application (MP3, WAV, FLAC, OGG, AAC, M4A)

## Component Architecture

### Structure

- Audio playback element (hidden from view)
- Web Audio API pipeline for frequency analysis
- Flip container with 3D transform capability
  - Front side: Normal file icon
  - Back side: Live waveform visualization
- State management for hover and playback control

### Behavioral Flow

1. User hovers over audio file icon
2. Icon flips to reveal live waveform visualization
3. Audio playback begins from start
4. Volume gradually increases to preview level
5. Waveform bars animate based on actual audio frequencies
6. Audio loops continuously during hover
7. On mouse leave, volume quickly fades out
8. Icon flips back to original state
9. Audio playback stops and resets

## Technical Requirements

- HTML5 Audio API support
- CSS 3D Transform support
- requestAnimationFrame support
- Object URL creation capability
- Modern browser compatibility (Chrome, Firefox, Safari, Edge)
